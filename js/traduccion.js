const resources = {
  // ðŸ‡ªðŸ‡¸ ESPAÃ‘OL
  es: {
    translation: {
      "inicio": "Inicio",
      "menu": "MenÃº",
      "ordena": "Ordena",
      "contacto": "Contacto",
      "bienvenida": "AquÃ­ la pizza no se comparte, se conquista. Bienvenidos A la 8VA Rebanada",
      "cerrar-sesion": "Cerrar sesiÃ³n",
      "btn-login": "Iniciar SesiÃ³n",
      "ver-ubicacion": "ðŸ“ Ver ubicaciÃ³n",
      "ubicacion1": "ALAMEDAS DE VILLAFRANCA",
      "ubicacion2": "LOMAS DE LOS CASTILLOS",

      
      // MenÃº y Buscador
      "buscar-producto": "Buscar producto...",
      "ver-todo": "Ver todo",
      "pizzas": "Pizzas",
      "pollo": "Pollo",
      "bebidas": "Bebidas",
      "postres": "Postres",

      // Tarjetas y Carrito
      "agregar-carrito": "Agregar al carrito",
      "no-resultados": "No se encontraron productos.",
      "tu-carro": "Â¡TU CARRO REBANADO!",
      "total": "Total:",
      "pagar": "PAGAR",
      
      // Alertas JS
      "alerta-vacio": "ðŸ›’ Agrega productos antes de continuar con tu orden.",
      "error-guardar": "Error al guardar el carrito: ",
      "error-general": "No se pudo guardar el carrito.",
      
      // Ordena / Entrega
      "titulo-tienda": "ELIGE TU TIENDA",
      "contenedor-preferencia": "Â¿CÃ“MO PREFIERES RECIBIR TU PIZZA?",
      "opcion-domicilio": "A DOMICILIO",
      "opcion-tienda": "En tienda",

      "titulo-mapa": "ðŸ“ Ingresa tu direcciÃ³n de entrega en LeÃ³n, Gto",
      "buscar-direccion": "Buscar direcciÃ³n en LeÃ³n, Gto",
      "label-direccion": "DirecciÃ³n:",
      "no-seleccionada": "No seleccionada",
      "label-lat": "Latitud:",
      "label-lng": "Longitud:",
      "btn-confirmar": "âœ… Confirmar direcciÃ³n",
      "alerta-mapa": "âš ï¸ Primero selecciona una direcciÃ³n vÃ¡lida en el mapa.",

      "settings-title": "ConfiguraciÃ³n",
      "settings-language": "Idioma:",
      "settings-dark": "Modo oscuro:",
      "settings-read": "Modo lectura:",
      "settings-audio": "Audio del video:",
      "settings-close": "Cerrar",

      "titulo-sucursal": "Selecciona una sucursal",
      "btn-recoger": "âœ” Recoger aquÃ­",

      "ticket-titulo": "ðŸ§¾ Ticket de Compra",
      "ticket-qr-instruccion": "Escanea tu cÃ³digo QR",
      "col-imagen": "Imagen",
      "col-producto": "Producto",
      "col-cantidad": "Cantidad",
      "col-total": "Total",
      "col-tipo": "Tipo de entrega",
      "col-direccion": "DirecciÃ³n",

      "btn-volver": "â¬… Volver al inicio",

      "contacto-servicio": "Estamos a tu servicio â˜Žï¸",
      "contacto-horarios": "Horarios",
      "horario-pedidos": "Pedidos en lÃ­nea: 11:00am â€“ 11:00pm",
      "horario-entrega": "Entrega a domicilio: hasta 11:30pm",
      "horario-soporte": "Soporte en lÃ­nea: 12:00pm â€“ 9:00pm",
      
      "contacto-escucharte": "Queremos escucharte",
      "contacto-desc": "Â¿Tienes alguna sugerencia, comentario o queja sobre nuestro servicio o productos? Por favor compÃ¡rtela con nosotros.",
      "placeholder-escribe": "Escribe aquÃ­..."
    }
  },
  
  // ðŸ‡ºðŸ‡¸ ENGLISH
  en: {
    translation: {
      "inicio": "Home",
      "menu": "Menu",
      "ordena": "Order",
      "contacto": "Contact",
      "bienvenida": "Here, pizza isnâ€™t shared, itâ€™s conquered. Welcome to the 8th Slice.",
      "cerrar-sesion": "Log Out",
      "btn-login": "Log in",
      "ver-ubicacion": "ðŸ“ See location",
      "ubicacion1": "ALAMEDAS DE VILLAFRANCA",
      "ubicacion2": "LOMAS DE LOS CASTILLOS",
      
      "buscar-producto": "Search product...",
      "ver-todo": "All",
      "pizzas": "Pizzas",
      "pollo": "Chicken",
      "bebidas": "Drinks",
      "postres": "Desserts",

      "agregar-carrito": "Add to cart",
      "no-resultados": "No products found.",
      "tu-carro": "YOUR SLICED CART!",
      "total": "Total:",
      "pagar": "PAY NOW",

      "alerta-vacio": "ðŸ›’ Add products before continuing.",
      "error-guardar": "Error saving cart: ",
      "error-general": "Could not save the cart.",

      "titulo-tienda": "CHOOSE YOUR STORE",
      "contenedor-preferencia": "HOW DO YOU WANT YOUR PIZZA?",
      "opcion-domicilio": "DELIVERY",
      "opcion-tienda": "PICK UP",

      "titulo-mapa": "ðŸ“ Enter your delivery address in LeÃ³n, Gto",
      "buscar-direccion": "Search address in LeÃ³n, Gto",
      "label-direccion": "Address:",
      "no-seleccionada": "Not selected",
      "label-lat": "Latitude:",
      "label-lng": "Longitude:",
      "btn-confirmar": "âœ… Confirm address",
      "alerta-mapa": "âš ï¸ First select a valid address on the map.",

      "settings-title": "Settings",
      "settings-language": "Language:",
      "settings-dark": "Dark mode:",
      "settings-read": "Reading mode:",
      "settings-audio": "Video audio:",
      "settings-close": "Close",

      "titulo-sucursal": "Select a branch",
      "btn-recoger": "âœ” Pick up here",

      "ticket-titulo": "ðŸ§¾ Purchase Receipt",
      "ticket-qr-instruccion": "Scan your QR Code",
      "col-imagen": "Image",
      "col-producto": "Product",
      "col-cantidad": "Qty",
      "col-total": "Total",
      "col-tipo": "Delivery Type",
      "col-direccion": "Address",

      "btn-volver": "â¬… Back to Home",

      "contacto-servicio": "We are at your service â˜Žï¸",
      "contacto-horarios": "Opening Hours",
      "horario-pedidos": "Online orders: 11:00am â€“ 11:00pm",
      "horario-entrega": "Home delivery: until 11:30pm",
      "horario-soporte": "Online support: 12:00pm â€“ 9:00pm",
      
      "contacto-escucharte": "We want to hear from you",
      "contacto-desc": "Do you have any suggestions, comments, or complaints about our service? Please share them with us.",
      "placeholder-escribe": "Write here..."


    }
  },

  // ðŸ‡«ðŸ‡· FRANÃ‡AIS
  fr: {
    translation: {
      "inicio": "Accueil",
      "menu": "Menu",
      "ordena": "Commander",
      "contacto": "Contact",
      "bienvenida": "Ici, la pizza ne se partage pas, elle se conquiert. Bienvenue Ã  la 8e Part",
      "cerrar-sesion": "DÃ©connexion",
      "btn-login": "Se connecter",
      "ver-ubicacion": "ðŸ“ Voir l'emplacement",
      "ubicacion1": "ALAMEDAS DE VILLAFRANCA",
      "ubicacion2": "LOMAS DE LOS CASTILLOS",
      
      "buscar-producto": "Rechercher un produit...",
      "ver-todo": "Tout voir",
      "pizzas": "Pizzas",
      "pollo": "Poulet",
      "bebidas": "Boissons",
      "postres": "Desserts",

      "agregar-carrito": "Ajouter au panier",
      "no-resultados": "Aucun produit trouvÃ©.",
      "tu-carro": "VOTRE PANIER TRANCHÃ‰ !",
      "total": "Total :",
      "pagar": "PAYER",

      "alerta-vacio": "ðŸ›’ Ajoutez des produits avant de continuer.",
      "error-guardar": "Erreur lors de l'enregistrement : ",
      "error-general": "Impossible d'enregistrer le panier.",

      "titulo-tienda": "CHOISISSEZ VOTRE MAGASIN",
      "contenedor-preferencia": "COMMENT VOULEZ-VOUS VOTRE PIZZA ?",
      "opcion-domicilio": "LIVRAISON",
      "opcion-tienda": "Ã€ emporter",

      "titulo-mapa": "ðŸ“ Entrez votre adresse de livraison Ã  LeÃ³n, Gto",
      "buscar-direccion": "Rechercher une adresse Ã  LeÃ³n, Gto",
      "label-direccion": "Adresse :",
      "no-seleccionada": "Non sÃ©lectionnÃ©e",
      "label-lat": "Latitude :",
      "label-lng": "Longitude :",
      "btn-confirmar": "âœ… Confirmer l'adresse",
      "alerta-mapa": "âš ï¸ SÃ©lectionnez d'abord une adresse valide sur la carte.",

      "settings-title": "ParamÃ¨tres",
      "settings-language": "Langue :",
      "settings-dark": "Mode sombre :",
      "settings-read": "Mode lecture :",
      "settings-audio": "Audio vidÃ©o :",
      "settings-close": "Fermer",

      "titulo-sucursal": "SÃ©lectionnez une succursale",
      "btn-recoger": "âœ” RÃ©cupÃ©rer ici",

      "ticket-titulo": "ðŸ§¾ ReÃ§u d'achat",
      "ticket-qr-instruccion": "Scannez votre code QR",
      "col-imagen": "Image",
      "col-producto": "Produit",
      "col-cantidad": "QtÃ©",
      "col-total": "Total",
      "col-tipo": "Type de livraison",
      "col-direccion": "Adresse",

      "btn-volver": "â¬… Retour Ã  l'accueil",

      "contacto-servicio": "Nous sommes Ã  votre service â˜Žï¸",
      "contacto-horarios": "Horaires",
      "horario-pedidos": "Commandes en ligne : 11h00 â€“ 23h00",
      "horario-entrega": "Livraison Ã  domicile : jusqu'Ã  23h30",
      "horario-soporte": "Support en ligne : 12h00 â€“ 21h00",
      
      "contacto-escucharte": "Nous voulons vous entendre",
      "contacto-desc": "Avez-vous des suggestions, commentaires ou plaintes ? Partagez-les avec nous.",
      "placeholder-escribe": "Ã‰crivez ici..."


    }
  },

  // ðŸ‡®ðŸ‡¹ ITALIANO
  it: {
    translation: {
      "inicio": "Home",
      "menu": "Menu",
      "ordena": "Ordina",
      "contacto": "Contatto",
      "bienvenida": "Qui la pizza non si condivide, si conquista. Benvenuti allâ€™8Âª Fetta.",
      "cerrar-sesion": "Disconnettersi",
      "btn-login": "Accedi",
      "ver-ubicacion": "ðŸ“ Vedi posizione",
      "ubicacion1": "ALAMEDAS DE VILLAFRANCA",
      "ubicacion2": "LOMAS DE LOS CASTILLOS",
      
      "buscar-producto": "Cerca prodotto...",
      "ver-todo": "Vedi tutto",
      "pizzas": "Pizze",
      "pollo": "Pollo",
      "bebidas": "Bevande",
      "postres": "Dolci",

      "agregar-carrito": "Aggiungi al carrello",
      "no-resultados": "Nessun prodotto trovato.",
      "tu-carro": "IL TUO CARRELLO!",
      "total": "Totale:",
      "pagar": "PAGARE",

      "alerta-vacio": "ðŸ›’ Aggiungi prodotti prima di continuare.",
      "error-guardar": "Errore durante il salvataggio: ",
      "error-general": "Impossibile salvare il carrello.",

      "titulo-tienda": "SCEGLI IL NEGOZIO",
      "contenedor-preferencia": "COME VUOI LA TUA PIZZA?",
      "opcion-domicilio": "CONSEGNA",
      "opcion-tienda": "Ritiro",

      "titulo-mapa": "ðŸ“ Inserisci il tuo indirizzo di consegna a LeÃ³n, Gto",
      "buscar-direccion": "Cerca indirizzo a LeÃ³n, Gto",
      "label-direccion": "Indirizzo:",
      "no-seleccionada": "Non selezionato",
      "label-lat": "Latitudine:",
      "label-lng": "Longitudine:",
      "btn-confirmar": "âœ… Conferma indirizzo",
      "alerta-mapa": "âš ï¸ Seleziona prima un indirizzo valido sulla mappa.",

      "settings-title": "Impostazioni",
      "settings-language": "Lingua:",
      "settings-dark": "ModalitÃ  scura:",
      "settings-read": "ModalitÃ  lettura:",
      "settings-audio": "Audio video:",
      "settings-close": "Chiudi",

      "titulo-sucursal": "Seleziona una filiale",
      "btn-recoger": "âœ” Ritira qui",

      "ticket-titulo": "ðŸ§¾ Ricevuta d'acquisto",
      "ticket-qr-instruccion": "Scansiona il tuo codice QR",
      "col-imagen": "Immagine",
      "col-producto": "Prodotto",
      "col-cantidad": "QtÃ ",
      "col-total": "Totale",
      "col-tipo": "Tipo di consegna",
      "col-direccion": "Indirizzo",

      "btn-volver": "â¬… Torna alla Home",

      "contacto-servicio": "Siamo al tuo servizio â˜Žï¸",
      "contacto-horarios": "Orari",
      "horario-pedidos": "Ordini online: 11:00 â€“ 23:00",
      "horario-entrega": "Consegna a domicilio: fino alle 23:30",
      "horario-soporte": "Supporto online: 12:00 â€“ 21:00",
      
      "contacto-escucharte": "Vogliamo ascoltarti",
      "contacto-desc": "Hai suggerimenti, commenti o reclami? Condividili con noi.",
      "placeholder-escribe": "Scrivi qui..."

      
    }
  },

  // ðŸ‡¨ðŸ‡³ CHINO (Simplificado)
  zh: {
    translation: {
      "inicio": "é¦–é¡µ",
      "menu": "èœå•",
      "ordena": "è®¢è´­",
      "contacto": "è”ç³»",
      "bienvenida": "åœ¨è¿™é‡Œï¼ŒæŠ«è¨ä¸æ˜¯åˆ†äº«çš„ï¼Œè€Œæ˜¯å¾æœçš„ã€‚æ¬¢è¿Žæ¥åˆ°ç¬¬8ç‰‡",
      "cerrar-sesion": "æ³¨é”€",
      "btn-login": "ç™»å½•",
      "ver-ubicacion": "ðŸ“ æŸ¥çœ‹ä½ç½®",
      "ubicacion1": "ALAMEDAS DE VILLAFRANCA",
      "ubicacion2": "LOMAS DE LOS CASTILLOS",
      
      "buscar-producto": "æœç´¢äº§å“...",
      "ver-todo": "æŸ¥çœ‹å…¨éƒ¨",
      "pizzas": "æŠ«è¨",
      "pollo": "é¸¡è‚‰",
      "bebidas": "é¥®æ–™",
      "postres": "ç”œç‚¹",

      "agregar-carrito": "åŠ å…¥è´­ç‰©è½¦",
      "no-resultados": "æœªæ‰¾åˆ°äº§å“ã€‚",
      "tu-carro": "æ‚¨çš„è´­ç‰©è½¦ï¼",
      "total": "æ€»è®¡ï¼š",
      "pagar": "æ”¯ä»˜",

      "alerta-vacio": "ðŸ›’ ç»§ç»­å‰è¯·æ·»åŠ äº§å“ã€‚",
      "error-guardar": "ä¿å­˜è´­ç‰©è½¦æ—¶å‡ºé”™ï¼š",
      "error-general": "æ— æ³•ä¿å­˜è´­ç‰©è½¦ã€‚",

      "titulo-tienda": "é€‰æ‹©åº—é“º",
      "contenedor-preferencia": "æ‚¨æƒ³å¦‚ä½•æŽ¥æ”¶æŠ«è¨ï¼Ÿ",
      "opcion-domicilio": "é€è´§ä¸Šé—¨",
      "opcion-tienda": "è‡ªæ",

      "titulo-mapa": "ðŸ“ è¾“å…¥æ‚¨åœ¨èŽ±æ˜‚ (Gto) çš„é€è´§åœ°å€",
      "buscar-direccion": "æœç´¢èŽ±æ˜‚ (Gto) çš„åœ°å€",
      "label-direccion": "åœ°å€ï¼š",
      "no-seleccionada": "æœªé€‰æ‹©",
      "label-lat": "çº¬åº¦ï¼š",
      "label-lng": "ç»åº¦ï¼š",
      "btn-confirmar": "âœ… ç¡®è®¤åœ°å€",
      "alerta-mapa": "âš ï¸ è¯·å…ˆåœ¨åœ°å›¾ä¸Šé€‰æ‹©æœ‰æ•ˆåœ°å€ã€‚",

      "settings-title": "è®¾ç½®",
      "settings-language": "è¯­è¨€ï¼š",
      "settings-dark": "æ·±è‰²æ¨¡å¼ï¼š",
      "settings-read": "é˜…è¯»æ¨¡å¼ï¼š",
      "settings-audio": "è§†é¢‘éŸ³é¢‘ï¼š",
      "settings-close": "å…³é—­",

      "titulo-sucursal": "é€‰æ‹©åˆ†åº—",
      "btn-recoger": "âœ” åœ¨æ­¤å–è´§",

      "ticket-titulo": "ðŸ§¾ è´­ä¹°æ”¶æ®",
      "ticket-qr-instruccion": "æ‰«ææ‚¨çš„äºŒç»´ç ",
      "col-imagen": "å›¾ç‰‡",
      "col-producto": "äº§å“",
      "col-cantidad": "æ•°é‡",
      "col-total": "æ€»è®¡",
      "col-tipo": "é…é€æ–¹å¼",
      "col-direccion": "åœ°å€",

      "btn-volver": "â¬… è¿”å›žé¦–é¡µ",

      "contacto-servicio": "æˆ‘ä»¬éšæ—¶ä¸ºæ‚¨æœåŠ¡ â˜Žï¸",
      "contacto-horarios": "è¥ä¸šæ—¶é—´",
      "horario-pedidos": "åœ¨çº¿è®¢å•ï¼šä¸Šåˆ 11:00 â€“ æ™šä¸Š 11:00",
      "horario-entrega": "é€è´§ä¸Šé—¨ï¼šè‡³æ™šä¸Š 11:30",
      "horario-soporte": "åœ¨çº¿æ”¯æŒï¼šä¸­åˆ 12:00 â€“ æ™šä¸Š 9:00",
      
      "contacto-escucharte": "æˆ‘ä»¬è¦å¬å–æ‚¨çš„æ„è§",
      "contacto-desc": "æ‚¨å¯¹æˆ‘ä»¬çš„æœåŠ¡æˆ–äº§å“æœ‰ä»€ä¹ˆå»ºè®®ã€æ„è§æˆ–æŠ•è¯‰å—ï¼Ÿè¯·ä¸Žæˆ‘ä»¬åˆ†äº«ã€‚",
      "placeholder-escribe": "å†™åœ¨è¿™é‡Œ..."
    }
  },

  // ðŸ‡µðŸ‡¹ PORTUGUÃ‰S
  pt: {
    translation: {
      "inicio": "InÃ­cio",
      "menu": "CardÃ¡pio",
      "ordena": "Pedir",
      "contacto": "Contato",
      "bienvenida": "Aqui a pizza nÃ£o se divide, conquista-se. Bem-vindos Ã  8Âª Fatia.",
      "cerrar-sesion": "Sair",
      "btn-login": "Entrar",
      "ver-ubicacion": "ðŸ“ Ver localizaÃ§Ã£o",
      "ubicacion1": "ALAMEDAS DE VILLAFRANCA",
      "ubicacion2": "LOMAS DE LOS CASTILLOS",
      
      "buscar-producto": "Buscar produto...",
      "ver-todo": "Ver tudo",
      "pizzas": "Pizzas",
      "pollo": "Frango",
      "bebidas": "Bebidas",
      "postres": "Sobremesas",

      "agregar-carrito": "Adicionar ao carrinho",
      "no-resultados": "Nenhum produto encontrado.",
      "tu-carro": "SEU CARRINHO!",
      "total": "Total:",
      "pagar": "PAGAR",

      "alerta-vacio": "ðŸ›’ Adicione produtos antes de continuar.",
      "error-guardar": "Erro ao salvar carrinho: ",
      "error-general": "NÃ£o foi possÃ­vel salvar o carrinho.",

      "titulo-tienda": "ESCOLHA A LOJA",
      "contenedor-preferencia": "COMO VOCÃŠ PREFERE SUA PIZZA?",
      "opcion-domicilio": "ENTREGA",
      "opcion-tienda": "Retirar na loja",

      "titulo-mapa": "ðŸ“ Insira seu endereÃ§o de entrega em LeÃ³n, Gto",
      "buscar-direccion": "Buscar endereÃ§o em LeÃ³n, Gto",
      "label-direccion": "EndereÃ§o:",
      "no-seleccionada": "NÃ£o selecionado",
      "label-lat": "Latitude:",
      "label-lng": "Longitude:",
      "btn-confirmar": "âœ… Confirmar endereÃ§o",
      "alerta-mapa": "âš ï¸ Selecione primeiro um endereÃ§o vÃ¡lido no mapa.",

      "settings-title": "ConfiguraÃ§Ãµes",
      "settings-language": "Idioma:",
      "settings-dark": "Modo escuro:",
      "settings-read": "Modo leitura:",
      "settings-audio": "Ãudio do vÃ­deo:",
      "settings-close": "Fechar",

      "ticket-titulo": "ðŸ§¾ Recibo de Compra",
      "ticket-qr-instruccion": "Digitalize seu cÃ³digo QR",
      "col-imagen": "Imagem",
      "col-producto": "Produto",
      "col-cantidad": "Qtd",
      "col-total": "Total",
      "col-tipo": "Tipo de entrega",
      "col-direccion": "EndereÃ§o",

      "btn-volver": "â¬… Voltar ao InÃ­cio",

      "contacto-servicio": "Estamos ao seu serviÃ§o â˜Žï¸",
      "contacto-horarios": "HorÃ¡rios",
      "horario-pedidos": "Pedidos online: 11:00 â€“ 23:00",
      "horario-entrega": "Entrega ao domicÃ­lio: atÃ© 23:30",
      "horario-soporte": "Suporte online: 12:00 â€“ 21:00",
      
      "contacto-escucharte": "Queremos ouvir vocÃª",
      "contacto-desc": "VocÃª tem alguma sugestÃ£o, comentÃ¡rio ou reclamaÃ§Ã£o? Por favor, compartilhe conosco.",
      "placeholder-escribe": "Escreva aqui..."
  
    }
  }
};

/* ===========================================================
   INICIALIZACIÃ“N
=========================================================== */
const idiomaInicial = localStorage.getItem("idioma") || "es";

// Inicializamos i18next
i18next.init({
  lng: idiomaInicial,
  debug: false,
  resources: resources
}, function(err, t) {
  actualizarTextos();
});

/* ===========================================================
    ACTUALIZAR TEXTOS
=========================================================== */

function actualizarTextos() {
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    el.innerHTML = i18next.t(key);
  });
}

/* ===========================================================
    ELEMENTOS DEL MODAL
=========================================================== */

const modal = document.getElementById("modal-config");
const btnConfig = document.getElementById("btn-config");
const cerrarConfig = document.getElementById("cerrar-config");

// Switches
const darkToggle = document.getElementById("modo-oscuro");
const readToggle = document.getElementById("modo-lectura");
const selectIdioma = document.getElementById("select-idioma");

/* ===========================================================
    ABRIR / CERRAR MODAL
=========================================================== */

btnConfig?.addEventListener("click", () => {
  modal.style.display = "flex";
  cargarSwitches(); // â† IMPORTANTE: marca los switches correctamente
});

cerrarConfig?.addEventListener("click", () => {
  modal.style.display = "none";
});

window.addEventListener("click", (e) => {
  if (e.target === modal) modal.style.display = "none";
});

/* ===========================================================
    GUARDAR CONFIGURACIONES
=========================================================== */


darkToggle?.addEventListener("change", () => {
  document.body.classList.toggle("dark-mode", darkToggle.checked);
  localStorage.setItem("modoOscuro", darkToggle.checked);
});

readToggle?.addEventListener("change", () => {
  document.body.classList.toggle("read-mode", readToggle.checked);
  localStorage.setItem("modoLectura", readToggle.checked);
});

selectIdioma?.addEventListener("change", () => {
  const idioma = selectIdioma.value;
  localStorage.setItem("idioma", idioma);
  i18next.changeLanguage(idioma);
  actualizarTextos();
});

/* ===========================================================
    CARGAR CONFIGURACIONES EN TODAS LAS PÃGINAS
=========================================================== */
document.addEventListener("DOMContentLoaded", () => {

  // ============================
  //  MODO OSCURO
  // ============================
  const modoOscuro = localStorage.getItem("modoOscuro") === "true";
  if (darkToggle) darkToggle.checked = modoOscuro;
  document.body.classList.toggle("dark-mode", modoOscuro);

  // ============================
  //  MODO LECTURA
  // ============================
  const modoLectura = localStorage.getItem("modoLectura") === "true";
  if (readToggle) readToggle.checked = modoLectura;
  document.body.classList.toggle("read-mode", modoLectura);

  // ============================
  //  IDIOMA
  // ============================
  const idiomaGuardado = localStorage.getItem("idioma") || "es";
  if (selectIdioma) selectIdioma.value = idiomaGuardado;
  i18next.changeLanguage(idiomaGuardado);

  // ============================
  //  VIDEO â€“ AUDIO
  // ============================
  const video = document.getElementById("video-hero");
  const audioSwitch = document.getElementById("audio-video");

  if (video && audioSwitch) {

      // Recuperar preferencia guardada
      if (localStorage.getItem("videoAudio") === "on") {
          audioSwitch.checked = true;
          video.muted = false;
          video.volume = 1;
      }

      // Evento del switch
      audioSwitch.addEventListener("change", function () {
          if (audioSwitch.checked) {
              video.muted = false;
              video.volume = 1;
              localStorage.setItem("videoAudio", "on");
          } else {
              video.muted = true;
              localStorage.setItem("videoAudio", "off");
          }
      });
  }

  // Refrescar textos
  setTimeout(actualizarTextos, 100);
});

/* ===========================================================
    MARCAR SWITCHES AL ABRIR EL MODAL
=========================================================== */
function cargarSwitches() {
  // Modo oscuro
  if (darkToggle)
    darkToggle.checked = localStorage.getItem("modoOscuro") === "true";

  // Modo lectura
  if (readToggle)
    readToggle.checked = localStorage.getItem("modoLectura") === "true";

  // Idioma
  if (selectIdioma)
    selectIdioma.value = localStorage.getItem("idioma") || "es";
}
